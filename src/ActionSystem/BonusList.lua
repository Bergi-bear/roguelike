---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 28.02.2021 2:41
---
function GiveForAll(reward)
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        if IsPlayerSlotState(Player(i), PLAYER_SLOT_STATE_PLAYING) and GetPlayerController(Player(i))==MAP_CONTROL_USER then
            local data=HERO[i]
            if data then
                local hero=data.UnitHero
                if reward=="CodoHeart" then
                    AddMaxLife(hero,100)
                end
                if reward=="GoldReward" then
                    UnitAddGold(hero,100)
                end
            end
        end
    end
end

function AddMaxLife(hero,amount)
    local maxHP=BlzGetUnitMaxHP(hero)
    BlzSetUnitMaxHP(hero,maxHP+amount)
    HealUnit(hero,amount)
end

function UnitAddGold(hero,amount)
    local data=HERO[GetPlayerId(GetOwningPlayer(hero))]
    data.ShowGoldSec=0.3
    if not data.ShowGoldAmount then data.ShowGoldAmount=0 end
    data.ShowGoldAmount=data.ShowGoldAmount+amount
    if data.ShowGold then
        data.ShowGold=false
        TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
            data.ShowGoldSec=data.ShowGoldSec-TIMER_PERIOD
            if data.ShowGoldSec<=0 then
                data.ShowGold=true
                DestroyTimer(GetExpiredTimer())
                FlyTextTagGoldBounty(hero,"+"..I2S(data.ShowGoldAmount),GetOwningPlayer(hero))
                normal_sound("SystemGeneric\\ReceiveGold",GetUnitXY(hero))
                AddGold(data,amount)
                data.ShowGoldAmount=0
            end
        end)
    end

end