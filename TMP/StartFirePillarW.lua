---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 26.06.2020 14:56
---
function StartFirePillar(data)
	local effModel="Abilities\\Weapons\\FireBallMissile\\FireBallMissile"
	local hero=data.UnitHero
	local angleCast = GetUnitFacing(hero)--AngleBetweenXY(GetUnitX(hero), GetUnitY(hero), GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid]) / bj_DEGTORAD
	local curAngle=angleCast

	TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
		angleCast = AngleBetweenXY(GetUnitX(hero), GetUnitY(hero), GetPlayerMouseX[data.pid], GetPlayerMouseY[data.pid]) / bj_DEGTORAD
		curAngle = lerpTheta(curAngle, angleCast, TIMER_PERIOD * 8)
		--angle=GetUnitFacing(hero)
		if not data.FrameTable[10].OnCD then
			data.FirePillarState=false
		end

		if data.FirePillarState then
			local x,y=MoveXY(GetUnitX(hero),GetUnitY(hero),50,curAngle)
			CreateAndForceBullet(hero,curAngle,50,effModel,x,y,5,250)
		else
			DestroyTimer(GetExpiredTimer())
		end
		if not UnitAlive(hero) then -- и прочие услоия прерывания огнемёта
			DestroyTimer(GetExpiredTimer())
		end
	end)
end
